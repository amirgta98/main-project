<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>page_1</title>
    <link rel="stylesheet" href="../../asset/style/general.css">
    <link rel="stylesheet" href="../../asset/plugin/Bootstrap/bootstrap.css">
    <link rel="stylesheet" href="../../asset/style/Qtv/smalTobigItems.css">

    <style>
        :root {
            --dollar-size: 14cqw;
            --cent-size: 11cqw;
            --rounded-price-padding: 2%;
        }

        @media (orientation: portrait) {
            :root {
                --dollar-size: 9cqw;
                --cent-size: 11cqw;
            }

            .price {
                font-size: calc(var(--dollar-size)* 2);
            }
        }
    </style>
</head>

<body>
    <div class="full-page d-flex justify-content-between bigSizeItems-box">
        <div class="bsi-start  d-flex justify-content-center">
            <div class="small-item-container">
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/1.jfif" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/2.jfif" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/3.jfif" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/4.jfif" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/5.jfif" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/3.jfif" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/7" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
                <div class="small-item">
                    <div class="small-item-image position-relative">
                        <img src="../../asset/img/food/8.jpg" alt="" class="w-100 h-100 object-fit-cover">
                        <h4 class="m-0 price rounded-price offer small-item-price position-absolute">
                            $16<span>99</span></h4>

                    </div>
                    <div class="small-item-des text-center">
                        <h5 class="m-0">Pizza hot curt</h5>
                        <h6 class="m-0">some this des we have here to show </h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex align-items-center bsi-end">
            <div class="bigSizeItem-container ">
                <h3 class="text-center w-100 mx-auto name-of-Big-Item ">Done Kebab <br> in turky and made in</h3>
                <div class="big-image-container position-relative">
                    <div class="extra-text-container position-absolute big-size">
                        <h4>in xxl size:</h4>
                        <h4 class="m-0 price">
                            $16<span>99</span></h4>
                        <h6>Lorem ipsum dolor sit amet </h6>
                    </div>
                    <div class="extra-text-container position-absolute small-size">
                        <h4>in sm size:</h4>
                        <h4 class="m-0 price">
                            $16<span>99</span></h4>
                        <h6>Lorem ipsum dolor sit amet </h6>
                    </div>
                    <img src="img/kebab.png" alt="food image" class="w-100 ">
                </div>
            </div>
        </div>


    </div>
</body>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script>
$(document).ready(() => {
    // Cache DOM elements
    const elements = {
        smallItems: $('.small-item'),
        bigImage: $('.big-image-container img'),
        bigContainer: $('.bigSizeItem-container'),
        nameContainer: $('.name-of-Big-Item'),
        bigSizePrice: $('.extra-text-container.big-size .price'),
        smallSizePrice: $('.extra-text-container.small-size .price')
    };

    // State management
    const state = {
        currentIndex: 0,
        data: [],
        slideInterval: null,
        sliceTime:3000
    };

    // Format price helper
    const formatPrice = (price) => {
        const [dollars, cents = '00'] = price.toString().split('.');
        return { dollars, cents };
    };

    // Update price display
    const updatePriceDisplay = (element, price) => {
        const { dollars, cents } = formatPrice(price);
        element.html(`$${dollars}<span>${cents}</span>`);
    };

    // Update small item display
    const updateSmallItem = (item, data) => {
        const $item = $(item);
        $item.find('.small-item-des h5').text(data.name);
        $item.find('.small-item-des h6').text(data.description);
        $item.find('.small-item-image img').attr('src', data.image);
        updatePriceDisplay($item.find('.small-item-price'), data.smallPrice);
    };

    // Update big item display
    const updateBigItem = (index) => {
        const item = state.data[index];
        if (!item) return;

        elements.bigImage.attr('src', item.image);
        elements.nameContainer.text(item.name);
        updatePriceDisplay(elements.bigSizePrice, item.largePrice);
        updatePriceDisplay(elements.smallSizePrice, item.smallPrice);

        elements.smallItems.removeClass('active-item');
        elements.smallItems.eq(index).addClass('active-item');
    };

    // Handle slide transition
    const handleSlideTransition = () => {
        elements.bigContainer.addClass('fade-out');
        
        setTimeout(() => {
            updateBigItem(state.currentIndex);
            elements.bigContainer
                .removeClass('fade-out')
                .addClass('fade-in');

            setTimeout(() => {
                elements.bigContainer.removeClass('fade-in');
            }, 1000);

            state.currentIndex = (state.currentIndex + 1) % state.data.length;
        }, 1000);
    };

    // Start slider
    const startSlider = () => {
        handleSlideTransition();
        state.slideInterval = setInterval(handleSlideTransition, state.sliceTime);
    };

    // Handle small item click
    const handleSmallItemClick = (event) => {
        clearInterval(state.slideInterval);
        const index = elements.smallItems.index($(event.target).closest('.small-item'));
        state.currentIndex = index;
        updateBigItem(index);
    };

    // Initialize slider
    const initializeSlider = (data) => {
        state.data = data;

        // Initialize small items
        elements.smallItems.each((index, item) => {
            if (data[index]) {
                updateSmallItem(item, data[index]);
            }
        });

        // Set up click handlers
        elements.smallItems.find('.small-item-image img').on('click', handleSmallItemClick);

        // Initialize first item and start slider
        updateBigItem(state.currentIndex);
        startSlider();
    };

    // Fetch and initialize
    $.getJSON('http://localhost:3000/foods', initializeSlider)
        .fail((error) => {
            console.error('Failed to fetch food data:', error);
        });
});
</script>

</html>